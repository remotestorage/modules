<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>PrefixTree</title><link rel="stylesheet" type="text/css" href="../../styles/main.css"><script language=JavaScript src="../../javascript/main.js"></script><script language=JavaScript src="../../javascript/prettify.js"></script><script language=JavaScript src="../../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CClass"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="PrefixTree"></a>PrefixTree</h1><div class=CBody><p>A PrefixTree is a transparent layer on top of a (scoped) baseClient.&nbsp; It allows you to write as many documents as you want (tested up to about 20,000) without using any slashes in their paths.&nbsp; So basically it&rsquo;s then a key-value store, and it will &ldquo;feel&rdquo; like these documents are all in the base folder.&nbsp; In reality, PrefixTree creates a folder tree based on key prefixes, and translates keyToPath when going from your module code to the baseClient, and pathToKey when coming back from the baseClient to your module (e.g. in change events).</p><p>To use it, simply construct it from a BaseClient, for instance the privateClient which you receive when calling defineModule:</p><p>var prefixTree = new PrefixTree(privClient);</p><p>Then, you can replace all the calls you would usually do to the privClient, and do them to the prefixTree instead. storeObject/getObject, storeFile/getFile, remove, and on are all available. getListing and getAll are not, because they operate on folders, and PrefixTree exposes a non-hierarchical key-value store.</p><p>To receive one change event for each item currently in the store (e.g. to populate an in-memory representation), you can call:</p><p>prefixTree.fireInitial()</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#PrefixTree" >PrefixTree</a></td><td class=SDescription>A PrefixTree is a transparent layer on top of a (scoped) baseClient. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#PrefixTree.Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#PrefixTree.setMaxLeaves" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">setMaxLeaves</a></td><td class=SDescription>Control the internal maxLeaves variable. </td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#PrefixTree.getFile" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">getFile</a></td><td class=SDescription>The equivalent of BaseClient.getFile</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#PrefixTree.storeFile" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">storeFile</a></td><td class=SDescription>The equivalent of BaseClient.storeFile</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#PrefixTree.getObject" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">getObject</a></td><td class=SDescription>The equivalent of BaseClient.getObject</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#PrefixTree.remove" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">remove</a></td><td class=SDescription>The equivalent of BaseClient.remove</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#PrefixTree.storeObject" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">storeObject</a></td><td class=SDescription>The equivalent of BaseClient.storeObject</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#PrefixTree.on" id=link7 onMouseOver="ShowTip(event, 'tt7', 'link7')" onMouseOut="HideTip('tt7')">on</a></td><td class=SDescription>The equivalent of BaseClient.on</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#PrefixTree.fireInitial" id=link8 onMouseOver="ShowTip(event, 'tt8', 'link8')" onMouseOut="HideTip('tt8')">fireInitial</a></td><td class=SDescription>Will trigger one change event for each document currently in the tree. </td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="PrefixTree.Functions"></a>Functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="PrefixTree.setMaxLeaves"></a>setMaxLeaves</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>setMaxLeaves: function(</td><td class="PParameter  prettyprint " nowrap>val</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Control the internal maxLeaves variable.&nbsp; To get a small tree with large folders, choose a high value.&nbsp; If you prefer a large tree with small folders, choose a low value.&nbsp; This influences the ideal number of documents (tree leaves) in any folder, it does not limit the number of subfolders.&nbsp; By default, maxLeaves = 5.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>val</td><td class=CDLDescription>number, the value to set maxLeaves to.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="PrefixTree.getFile"></a>getFile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>getFile: function(</td><td class="PParameter  prettyprint " nowrap>key</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>The equivalent of BaseClient.getFile</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>key</td><td class=CDLDescription>string, the key, corresponding to the path (should not contain slashes).</td></tr></table><h4 class=CHeading>Returns</h4><p>A promise like the one from BaseClient.getFile.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="PrefixTree.storeFile"></a>storeFile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>storeFile: function(</td><td class="PParameter  prettyprint " nowrap>mimeType,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>key,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>body</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>The equivalent of BaseClient.storeFile</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>mimeType</td><td class=CDLDescription>string, like for BaseClient.storeFile</td></tr><tr><td class=CDLEntry>key</td><td class=CDLDescription>string, the key, corresponding to the path (should not contain slashes).</td></tr><tr><td class=CDLEntry>body</td><td class=CDLDescription>string or ArrayBuffer, like for BaseClient.storeFile</td></tr></table><h4 class=CHeading>Returns</h4><p>A promise like the one from BaseClient.storeFile.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="PrefixTree.getObject"></a>getObject</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>getObject: function(</td><td class="PParameter  prettyprint " nowrap>key</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>The equivalent of BaseClient.getObject</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>key</td><td class=CDLDescription>string, the key, corresponding to the path (should not contain slashes).</td></tr></table><h4 class=CHeading>Returns</h4><p>A promise like the one from BaseClient.getObject.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="PrefixTree.remove"></a>remove</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>remove: function(</td><td class="PParameter  prettyprint " nowrap>key</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>The equivalent of BaseClient.remove</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>key</td><td class=CDLDescription>string, the key, corresponding to the path (should not contain slashes).</td></tr></table><h4 class=CHeading>Returns</h4><p>A promise like the one from BaseClient.remove.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="PrefixTree.storeObject"></a>storeObject</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>storeObject: function(</td><td class="PParameter  prettyprint " nowrap>typeAlias,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>key,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>obj</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>The equivalent of BaseClient.storeObject</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>typeAlias</td><td class=CDLDescription>string, like for BaseClient.storObject</td></tr><tr><td class=CDLEntry>key</td><td class=CDLDescription>string, the key, corresponding to the path (should not contain slashes).</td></tr><tr><td class=CDLEntry>body</td><td class=CDLDescription>object, like for BaseClient.storeObject</td></tr></table><h4 class=CHeading>Returns</h4><p>A promise like the one from BaseClient.storeFile.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="PrefixTree.on"></a>on</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>on: function(</td><td class="PParameter  prettyprint " nowrap>event,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>cb</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>The equivalent of BaseClient.on</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>eventName</td><td class=CDLDescription>string, like for BaseClient.on</td></tr><tr><td class=CDLEntry>cb</td><td class=CDLDescription>function, like for BaseClient.on</td></tr></table><h4 class=CHeading>Returns</h4><p>A promise like the one from BaseClient.getObject, except that the event will contain a &lsquo;key&rsquo; field, corresponding to the path.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="PrefixTree.fireInitial"></a>fireInitial</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>fireInitial: function(</td><td class="PParameter  prettyprint " nowrap>dirs</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Will trigger one change event for each document currently in the tree.&nbsp; These events will have origin &lsquo;local&rsquo;.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>dirs</td><td class=CDLDescription>to be left undefined</td></tr></table></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MEntry><div class=MFile><a href="../../files2/overview-txt.html">Overview</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">Modules</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MFile><a href="../apps-js.html">Apps</a></div></div><div class=MEntry><div class=MFile><a href="../bookmarks-js.html">Bookmarks</a></div></div><div class=MEntry><div class=MFile><a href="../contacts-js.html">Contacts</a></div></div><div class=MEntry><div class=MFile><a href="../documents-js.html">Documents</a></div></div><div class=MEntry><div class=MFile><a href="../email-credentials-js.html">Email Credentials</a></div></div><div class=MEntry><div class=MFile><a href="../facebook-credentials-js.html">Facebook</a></div></div><div class=MEntry><div class=MFile><a href="../feeds-js.html">Feeds</a></div></div><div class=MEntry><div class=MFile><a href="../fitness-js.html">Fitness</a></div></div><div class=MEntry><div class=MFile><a href="../irc-credentials-js.html">IRC Credentials</a></div></div><div class=MEntry><div class=MFile><a href="../messages-js.html">Messages</a></div></div><div class=MEntry><div class=MFile><a href="../pgp-js.html">PGP</a></div></div><div class=MEntry><div class=MFile><a href="../pictures-js.html">Pictures</a></div></div><div class=MEntry><div class=MFile><a href="../shares-js.html">Shares</a></div></div><div class=MEntry><div class=MFile><a href="../sockethub-credentials-js.html">Sockethub Credentials</a></div></div><div class=MEntry><div class=MFile><a href="../twitter-credentials-js.html">Twitter</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Utils</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile><a href="credentialsstore-js.html">CredentialsStore</a></div></div><div class=MEntry><div class=MFile id=MSelected>PrefixTree</div></div><div class=MEntry><div class=MFile><a href="syncedmap-js.html">SyncedMap</a></div></div><div class=MEntry><div class=MFile><a href="syncedvar-js.html">SyncedVar</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../www-js.html">www</a></div></div><div class=MEntry><div class=MFile><a href="../xmpp-credentials-js.html">XMPP Credentials</a></div></div></div></div></div><div class=MEntry><div class=MIndex><a href="../../index/Schemas.html">List of schemas</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Exports.html">List of module functions</a></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option value="Exports">Exports</option><option value="Schemas">Schemas</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>setMaxLeaves: function(</td><td class="PParameter  prettyprint " nowrap>val</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Control the internal maxLeaves variable. </div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>getFile: function(</td><td class="PParameter  prettyprint " nowrap>key</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>The equivalent of BaseClient.getFile</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>storeFile: function(</td><td class="PParameter  prettyprint " nowrap>mimeType,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>key,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>body</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>The equivalent of BaseClient.storeFile</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>getObject: function(</td><td class="PParameter  prettyprint " nowrap>key</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>The equivalent of BaseClient.getObject</div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>remove: function(</td><td class="PParameter  prettyprint " nowrap>key</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>The equivalent of BaseClient.remove</div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>storeObject: function(</td><td class="PParameter  prettyprint " nowrap>typeAlias,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>key,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>obj</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>The equivalent of BaseClient.storeObject</div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>on: function(</td><td class="PParameter  prettyprint " nowrap>event,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>cb</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>The equivalent of BaseClient.on</div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>fireInitial: function(</td><td class="PParameter  prettyprint " nowrap>dirs</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Will trigger one change event for each document currently in the tree. </div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>